{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container my-5">
  <div class="form-card p-4 shadow-lg">
    <h2 class="text-center mb-4">Criar Novo Itinerário</h2>
    
    <!-- Exibição de erros gerais do formulário (caso existam) -->
    {% if form.errors %}
      <div class="alert alert-danger">
        <ul>
          {% for field, errors in form.errors.items %}
            {% for error in errors %}
              <li><strong>{{ field }}:</strong> {{ error }}</li>
            {% endfor %}
          {% endfor %}
        </ul>
      </div>
    {% endif %}
    
    <form method="POST" action="{% url 'create_itinerary' %}" class="row g-3">
      {% csrf_token %}

      <!-- 1. Destino -->
      <div class="col-md-6">
        <label for="destination" class="form-label">Destino</label>
        <input type="text" class="form-control input-rounded" id="destination" name="destination" placeholder="Ex: Natal, Brasil" required>
      </div>

      <!-- 2. Datas de Viagem -->
      <div class="col-md-6">
        <label for="startDate" class="form-label">Data de Início</label>
        <input type="date" class="form-control input-rounded" id="startDate" name="start_date" required>
      </div>

      <div class="col-md-6">
        <label for="endDate" class="form-label">Data de Término</label>
        <input type="date" class="form-control input-rounded" id="endDate" name="end_date" required>
      </div>

      <!-- 3. Orçamento Estimado -->
      <div class="col-md-6">
        <label for="budget" class="form-label">Orçamento Estimado (R$)</label>
        <input type="number" step="0.01" class="form-control input-rounded" id="budget" name="budget" placeholder="Ex: 2000" required>
      </div>

      <!-- 4. Número de Viajantes -->
      <div class="col-md-6">
        <label for="travelers" class="form-label">Número de Viajantes</label>
        <input type="number" class="form-control input-rounded" id="travelers" name="travelers" min="1" value="1">
      </div>

      <!-- 5. Interesses Principais -->
      <div class="col-md-12">
        <label class="form-label d-block">Interesses Principais</label>
        <div class="d-flex flex-wrap gap-3">
          <div class="form-check">
            <!-- Repare que o name mudou para interests_list -->
            <input class="form-check-input" type="checkbox" id="interestCultura" name="interests_list" value="Cultura">
            <label class="form-check-label" for="interestCultura">Cultura</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="interestGastronomia" name="interests_list" value="Gastronomia">
            <label class="form-check-label" for="interestGastronomia">Gastronomia</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="interestAventura" name="interests_list" value="Aventura">
            <label class="form-check-label" for="interestAventura">Aventura</label>
          </div>
        </div>
      </div>

      <!-- 6. Preferência de Alimentação -->
      <div class="col-md-6">
        <label for="foodPreferences" class="form-label">Preferência de Alimentação</label>
        <select class="form-select input-rounded" id="foodPreferences" name="food_preferences">
          <option value="nenhuma">Nenhuma Restrição</option>
          <option value="vegana">Vegana</option>
          <option value="vegetariana">Vegetariana</option>
          <option value="kosher">Kosher</option>
          <option value="halal">Halal</option>
        </select>
      </div>

      <!-- 7. Extras e Personalização -->
      <div class="col-md-6">
        <label for="extras" class="form-label">Extras e Personalização</label>
        <textarea class="form-control input-rounded" id="extras" name="extras" rows="3" placeholder="Ex: Preciso de acessibilidade, viajo com crianças..."></textarea>
      </div>

      <!-- 8. Transporte Preferido -->
      <div class="col-md-6">
        <label class="form-label">Modo de Transporte Preferido</label>
        <select class="form-select input-rounded" name="transport_mode">
          <option value="driving">Carro</option>
          <option value="walking">Caminhada</option>
          <option value="bicycling">Bicicleta</option>
          <option value="transit">Transporte Público</option>
        </select>
      </div>

      <!-- 9. Locais de Interesse -->
      <div class="col-md-6">
        <label for="interestPlaces" class="form-label">Locais de Interesse (opcional)</label>
        <textarea class="form-control input-rounded" id="interestPlaces" name="interest_places" rows="3" placeholder="Ex: Quero conhecer o Museu X, a Praia Y..."></textarea>
      </div>

      <div class="col-md-12 text-center">
        <button type="submit" class="btn btn-primary w-50 btn-lg shadow-sm">Gerar Roteiro</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
